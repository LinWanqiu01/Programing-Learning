> 当程序执行时，其main函数是如何被调用的;
>
> 命令行参数是如何传递给新程序的;
>
> 典型的存储空间布局是什么样式;如何分配另外的存储空间;
>
> 进程如何使用环境变量;
>
> 进程的各种不同终止方式。

#### main函数

C程序总是从main函数开始执行。main函数的原型是:`int main (int argc.char *argv[ ] );`
其中，`argc`是命令行参数的数目，`argv`是指向参数的各个指针所构成的数组。
当内核执行C程序时（使用一个exec函数)，在调用main前先调用一个特殊的启动例程。可执行程序文件将此启动例程指定为程序的起始地址———这是由连接编辑器设置的,而连接编辑器则由C编译器调用。启动例程从内核取得命令行参数和环境变量值,然后为按上述方式调用main 函数做好安排。

#### 进程终止

有8种方式使进程终止(termination)，其中5种为正常终止，它们是:

(1）从main返回;

(2）调用`exit`;

(3)   调用`_exit`或`_Exit`;

(4）最后一个线程从其启动例程返回;

(5)   从最后一个线程调用`pthread_exit` 。

异常终止有3种方式，它们是:

(6）调用abort;

(7)   接到一个信号;

(8)   最后一个线程对取消请求做出响应。

> 上节提及的启动例程是这样编写的，使得从main返回后立即调用exit函数。如果将启动例程以C代码形式表示(实际上该例程常常用汇编语言编写)，则它调用main函数的形式可能是:
> `exit（main (argc，argv[]) ) ;`

##### 退出函数

3个函数用于正常终止一个程序:`_exit`和`_Exit`立即进入内核，`exit`则先执行一些清理处理，然后返回内核。

```c
#include <stdlib.h>

void exit(int status) ;

void _Exit (int status) ;

#include <unistd.h>

void _exit(int status) ;
```

> **这3个函数对其他进程(如正在终止进程的父进程和子进程)的影响?**

> 使用不同头文件的原因是`_exit`和`_Exit`是由ISO C说明的,而_exit是由`POSIX.1`说明的。

3个退出函数都带一个整型参数，称为终止状态(或退出状态，exit status)。大多数UNIX系统shell 都提供检查进程终止状态的方法。

main函数返回一个整型值与用该值调用exit是等价的。于是在main函数中

`exit (0) ;`等价于`return (0) ;`

> **注意，内核使程序执行的唯一方法是调用一个exec函数。进程自愿终止的唯一方法是显式或隐式地（通过调用exit）调用_`_exit`和`_Exit`。进程也可非自愿地由一个信号使其终止。**